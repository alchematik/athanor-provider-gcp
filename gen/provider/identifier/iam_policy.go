// Code generated by athanor-go.
// DO NOT EDIT.

package identifier

import (
	"fmt"

	sdk "github.com/alchematik/athanor-go/sdk/provider/value"
)

type IamPolicyIdentifier struct {
	Resource sdk.ResourceIdentifier
}

func (x IamPolicyIdentifier) ToValue() sdk.Identifier {
	return sdk.Identifier{
		ResourceType: "iam_policy",
		Value: map[string]any{
			"resource": sdk.ToType[any](x.Resource),
		},
	}
}

func (x IamPolicyIdentifier) ResourceType() string {
	return "iam_policy"
}

func ParseIamPolicyIdentifier(v sdk.Identifier) (IamPolicyIdentifier, error) {

	m, err := sdk.Map[any](v.Value)
	if err != nil {
		return IamPolicyIdentifier{}, fmt.Errorf("error parsing iam_policy_identifier: %v", err)
	}

	resource, err := ParseIdentifier(m["resource"])
	if err != nil {
		return IamPolicyIdentifier{}, fmt.Errorf("error parsing iam_policy_identifier: %v", err)
	}

	return IamPolicyIdentifier{
		Resource: resource,
	}, nil
}
